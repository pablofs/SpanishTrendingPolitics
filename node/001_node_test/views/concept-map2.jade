doctype html
html
  head
    meta(charset='utf-8')
    meta(name='name', content='Concept Map')
    meta(name='description', content="An abstract mapping for parameters. Works best if first tag is 'unique' among the tracklist, and the second tag applies to multiple tracks")
    meta(name='mintags', content='2')
    meta(name='maxtags', content='2')
    title Jam Cellar 2014-05-06
    style.
      svg {
      font: 12px sans-serif;
      }
      text {
      pointer-events: none;
      }
      .inner_node rect {
      pointer-events: all;
      }
      .inner_node rect.highlight {
      stroke: #315B7E;
      stroke-width: 2px;
      }
      .outer_node circle {
      fill: #fff;
      stroke: steelblue;
      stroke-width: 1.5px;
      pointer-events: all;
      }
      .outer_node circle.highlight
      {
      stroke: #315B7E;
      stroke-width: 2px;
      }
      .link {
      fill: none;
      }
  body
    script(src='http://d3js.org/d3.v3.min.js')
    script.
      //
      // Generated by the Exaile Playlist Analyzer plugin.
      // (C) 2014 Dustin Spicuzza <dustin@virtualroadside.com>
      //
      // This work is licensed under the Creative Commons Attribution 4.0
      // International License. To view a copy of this license, visit
      // http://creativecommons.org/licenses/by/4.0/.
      //
      // Inspired by http://www.findtheconversation.com/concept-map/
      // Loosely based on http://bl.ocks.org/mbostock/4063550
      //
      var data = [['GIU', ['reforma', 'gente salga', 'gente', 'reforma laboral', 'mayoría absoluta', 'modelo productivo', 'escaños regalados', 'ley electoral tramposa', 'ley electoral']], ['GS', ['lío permanente', 'jefe', 'copago importante', 'servicio público', 'constitucional', 'comunidades autónomas', 'métodos anticonceptivos', 'salud sexual', 'director general', 'control previo', 'privatizar aena', 'mal camino', 'huelga general', 'aviación civil', 'descoordinación', 'jefe político', 'situación financiera', 'inseguridad jurídica', 'aborto clandestino', 'sáenz', 'transporte aéreo patas', 'bochornosos episodios', 'matrimonios homosexuales', 'llamen prisión permanente revisable', 'aborto', 'pequeños hurtos', 'seria descoordinación', 'don mariano rajoy', 'presiones corporativas', 'reformas unilaterales', 'política económica', 'organismos internacionales', 'campaña', 'definición general', 'recorten derechos', 'código penal', 'profesionales sanitarios', 'consensos básicos', 'preocupantes reformas', 'argumento falso', 'legislación integral', 'distintos idiomas', 'compañía aérea', 'salud', 'necesario consenso', 'línea aérea', 'medios personales', 'reformas legales importantes', 'elemental coherencia jurídica', 'modelo aeroportuario', 'graves recortes', 'tribunal constitucional', 'transporte aéreo', 'transporte aéreo permítame', 'compañía', 'necesaria mejora', 'carácter internacional', 'exclusiva responsabilidad', 'consensos', 'consejo general', 'depósito moderado', 'suficiente previsión', 'santamaría', 'cadena perpetua', 'sáenz santamaría', 'mayoría absoluta', 'líos marianistas', 'secuencia imparable', 'aena empresarios', 'campaña electoral', 'política', 'insidia objetivamente falsa', 'importantes', 'regalos corporativos', 'leyes europeas', 'don alberto ruiz gallardón']], ['GC-CiU', ['empresa', 'inspecciones', 'preparas fotocopias', 'agencia tributaria', 'ejemplos concretos', 'esfuerzo descomunal', 'mediano empresario', 'situación económica', 'papelito correspondiente', 'pequeña empresa exportadora', 'empresas exportadoras', 'reformas', 'difíciles profundas', 'casos concretos', 'ámbito financiero', 'correo electrónico', 'ámbito', 'listas interminables', 'reteniéndonos cantidades', 'sufrido demoras', 'pequeñas inspecciones', 'reformas profundas', 'trabas innecesarias', 'iniciativas legislativas', 'media hora']], ['GP', ['ayudas públicas', 'breve periodo', 'momentos', 'pleitos pendientes', 'regla general', 'agencia tributaria', 'mediana empresa', 'conflicto equiparase', 'llama legitimación', 'compañías', 'legitimación activa', 'cohesión territorial', 'objetivo básico', 'empresas exportadoras', 'mujeres menores', 'prejubilaciones falsas', 'única respuesta', 'déficit público', 'devolución mensual', 'nacido perdía', 'términos tenísticos', 'marianista claro', 'gonzález', 'sistema financiero', 'mujeres emigrantes', 'llama mariano rajoy', 'compañía', 'solución jurídica', 'respuesta positiva', 'plazo medio', 'secretario general', 'difícil sentirme', 'compañías aéreas', 'reforma laboral', 'necesarias comprobaciones', 'administraciones públicas', 'difícil', 'compañía líder', 'delegación especial', 'papel fundamental', 'agencia estatal tributaria', 'estabilidad presupuestaria', 'don felipe gonzález', 'consejo general', 'media nacional', 'mujeres', 'respuesta', 'empleos temporales', 'régimen especial', 'devolución', 'ley', 'tribunal constitucional', 'mercado laboral', 'ley electoral', 'media risas', 'gusto intentaré resolverlo', 'valores jurídicos protegidos', 'plazo', 'comprobación tributaria', 'acuerdos anteriores', 'delegación central', 'desfase presupuestario', 'vista económico', 'recordatorio histórico', 'déficit', 'campaña electoral', 'mujeres discapacitadas', 'unión europea', 'elemento clave', 'momentos difíciles alternativos', 'flexibilidad interna']]];
      // var data = [['GIU', ['principal aspecto', 'relación laboral', 'reforma laboral', 'reforma', 'conflicto social', 'equilibrio laboral', 'legislación laboral', 'olli rehn', 'renta salarial', 'guindos genuflexo']], ['GV (EAJ-PNV)', ['tantos', 'competencia asiática', 'ciento', 'mercado mundial', 'competencia', 'derecho europeo', 'comisión europea', 'naval español', 'arrendamiento fiscal', 'euskadi fíjese', 'sistema español', 'astilleros', 'tantos puestos', 'unión europea', 'suspensión inmediata', 'ciento europeo', 'investigación formal iniciada', 'sistema', 'astilleros españoles', 'comisión', 'naval', 'ciento global', 'puntilla definitiva']], ['GS', ['paz social', 'profesores', 'verdaderas consecuencias', 'economía productiva', 'hubiéramos tardado', 'enseñanza pública', 'despido', 'conocido anuncios', 'máximo días', 'agencia reuters', 'mínimas reglas', 'educación pública', 'boletín oficial', 'confrontación política', 'poderes públicos', 'entrada', 'reforma', 'condiciones ambientales', 'palabra rigor', 'variante', 'diálogo social', 'comunidad educativa', 'calificativos', 'jóvenes españoles', 'superestructura', 'derechos sociales', 'derechos laborales', 'grado i', 'cohesión social', 'miles', 'contrato indefinido', 'andalucía apostamos', 'campaña electoral', 'cortesía parlamentaria', 'tantos', 'elecciones andaluzas', 'idioma', 'responsable político', 'reforma irrespetuosa irrespetuosa', 'superestructura resuelta dígamelo', 'esfuerzo', 'comisarios europeos', 'forma unilateral', 'huelga general', 'déficit público', 'apoyo', 'diálogo político', 'sistema educativo español', 'asignatura adoctrina', 'andalucía', 'intenso proceso', 'distintos medios', 'constante entrada', 'clara involución', 'herencia clara', 'temarios', 'adoctrina', 'grave problema', 'deja desprotegidos', 'poderes', 'datos importantes', 'acuerdos bipartitos', 'denles apoyo', 'elecciones', 'esfuerzo económico', 'agenda europea', 'contestación posterior', 'despido libre', 'boletín', 'posición contraria', 'puerta falsa', 'productos marroquíes', 'decreto ley', 'tantos profesionales', 'sistema educativo', 'reactivación económica', 'acuerdo social', 'contrato libre', 'contrato', 'variante ferroviaria', 'idioma correspondiente', 'mano tendida', 'ratificación comercial', 'indefinido', 'promesas electorales', 'riesgo miles', 'carga ideológica', 'justa medida', 'herencia', 'asuntos económicos', 'servicios públicos', 'unión europea', 'adopten medidas', 'flexiinseguridad inseguridad', 'días', 'medio recurso', 'retroceso histórico', 'idiomas modernos', 'setecientos profesores', 'responsabilidad ineludible', 'juego sucio', 'contrato definidísimo', 'medidas compensatorias', 'dígamelo', 'relaciones comerciales', 'docentes aprobados', 'datos', 'genoma humano', 'acuerdo', 'productos marroquíes díganos', 'estimaciones macroeconómicas', 'temarios salvo', 'cotizaciones sociales', 'reformas laborales', 'calificativos bondadosos', 'propuestas inquietantes', 'comunidades autónomas', 'seguridad alimentaria', 'crecimiento económico', 'gobiernos socialistas', 'rigor necesario', 'poderes omnímodos', 'comisión europea', 'mercados europeos', 'díganos', 'responsable comunitario aclárenos', 'reforma laboral', 'viernes conocimos', 'negociación colectiva', 'real decreto', 'españoles durmieron', 'educación', 'posición', 'medidas', 'asignatura educación', 'consulta previa', 'lamento decirle', 'sistema educativo andaluz', 'inseguridad', 'relaciones laborales', 'combate ideológico']], ['GP', ['inversión', 'vida política', 'despido', 'españoles', 'cadena alimentaria', 'entorno internacional', 'servicios sociales', 'papeles escritos', 'balanza comercial positiva', 'situación económica', 'confrontación partidista', 'competencia desleal', 'administraciones públicas', 'países europeos', 'signos negativos', 'objetivo fundamental', 'negociación', 'atención sanitaria', 'fechas estuve', 'diálogo social', 'política agraria común', 'gestos negativos', 'términos dialécticos', 'derrota policial', 'despido fácil', 'caso', 'nivel nacional', 'dramática situación', 'inversión pública', 'déficit público', 'testimonio ético', 'protestas', 'sentencia', 'despido objetivo', 'intereses similares', 'ordenamiento jurídico', 'soluciones extrajudiciales', 'informe abril', 'fuerza', 'resultado satisfactorio', 'estuve', 'estructuras productivas', 'abogacía general', 'público', 'rasgos esenciales', 'objetivo irrenunciable', 'judicial independiente', 'ley', 'tribunal supremo', 'legitimación activa', 'demócratas', 'naval', 'compañía spanair', 'caso iniciemos', 'acción', 'tópicos recurrentes', 'social', 'semáforos seguros', 'agenda reformista', 'compañía aérea paga', 'parlamento', 'claro', 'informe pisa', 'sistema educativo', 'reformas laborales', 'retos', 'fracaso escolar', 'escrupuloso respeto', 'términos generales', 'actuación terrorista', 'crisis', 'mejora', 'crisis económica', 'duda', 'fuerzas', 'objetivo', 'verdaderos acuerdos', 'ruta conjunta', 'contratación administrativa', 'único mecanismo', 'posición española', 'sociosanitario', 'pacto', 'presupuestos generales', 'solución', 'actividad armada', 'crisis social', 'única razón', 'prioridad', 'tráficos', 'bosch i pascual', 'cabo reformas', 'insisto', 'seguros', 'política', 'cooperación internacional', 'servicio público', 'infraestructuras ferroviarias', 'situación económica adversa', 'tramitación parlamentaria', 'comunidades autónomas', 'repugnancia política', 'demócratas juntos', 'ámbito sanitario', 'solución razonable', 'mal favor', 'cargos electos locales', 'día publicación', 'dirección general', 'retribuciones', 'comisión europea', 'modelo sostenible', 'fuerza política sortu', 'izquierda abertzale', 'producto interior bruto', 'informe', 'pasadas elecciones generales', 'mejora sustancial', 'única cosa', 'administración dilapide', 'sistema', 'intereses españoles', 'deslegitimación social', 'práctica totalidad', 'llama asfa', 'políticos presentes', 'educación basada', 'estuve anteayer', 'protocolo agrario', 'ingresos contenidos', 'asuntos exteriores', 'ley orgánica', 'esencia estructurales', 'regeneración democrática', 'grave escenario', 'elecciones forales', 'mejores', 'papel esencial', 'quedarnos anclados', 'presupuestos', 'boletín oficial', 'distintas comunidades', 'confiera financiación suficiente', 'sistema basándose', 'comisión bilateral', 'políticas', 'comunidades autónomas competentes', 'lucio carrasco', 'mis órdenes', 'jurídicas', 'reformas necesarias', 'importante', 'plan gerontológico nacional', 'mecanismos claros', 'presente soluciones', 'hechos fácticos', 'retos presentes', 'cifra récord', 'bildu compareció', 'llamazares trigo', 'actuación', 'texto normativo', 'sociedad vasca', 'medianas empresas', 'duda habremos', 'real decreto ley', 'principal objetivo', 'profunda modificación', 'términos', 'aspectos concretos', 'máxima prioridad', 'tellado sotiello', 'temarios', 'red ferroviaria', 'abonen aranceles compensatorios', 'tráficos impresionante', 'elecciones', 'moción subsiguiente', 'régimen similar', 'resulta asombroso', 'políticos', 'eta deje', 'deje', 'calidad', 'resultados', 'sanidad', 'medidas', 'servicios esenciales', 'llamazares', 'partes afectadas', 'gasto corriente', 'agroalimentario español', 'vieja pregunta', 'constante evolución', 'sistema nacional', 'lucha antiterrorista', 'sistema sanitario', 'tomamos posesión', 'fuerte defensa', 'derecho comunitario', 'intereses agrarios españoles', 'distintas organizaciones sindicales', 'elementos probatorios', 'peores resultados', 'país', 'personas físicas', 'normas claras', 'elecciones municipales', 'crisis protestas', 'déficits públicos', 'daremos alas', 'protocolo agrícola', 'amplios consensos', 'programas electorales', 'territorio', 'organizaciones agrarias', 'gobiernos socialistas', 'guardia civil', 'información importante', 'espacio perdido', 'fase final', 'interior', 'territorio nacional', 'situación patrimonial', 'presupuestos prorrogados', 'desarrollo rural', 'público empresarial', 'modelo sanitario', 'líneas actuales', 'lunes estuve', 'absoluto respeto', 'credibilidad', 'unidad', 'organismos reguladores', 'dimensión política', 'debate sereno', 'organizaciones', 'realidad productiva española', 'elecciones generales', 'norma fundamental', 'seguridad insisto', 'máxima cooperación', 'consejo interterritorial', 'única hoja', 'debate', 'pacto reforzaremos', 'reforma responsable', 'función', 'audiencia nacional', 'máximo interés', 'oportunismo político', 'encadenar sine', 'unión progreso', 'reales decretos leyes', 'ilegalización sobrevenida', 'prioridad absoluta', 'política económica', 'instrumento fundamental', 'lecciones poquitas', 'seguridad', 'debate partidista', 'confrontaciones partidistas', 'único empresario', 'caso pasa', 'eventual ejercicio', 'acuerdos interconfederales', 'petición unánime', 'fuerza política legal', 'cuerpo nacional', 'oposición constructiva', 'sentimiento recíproco', 'eta pase', 'proyecciones relativas', 'don carlos salvador', 'información completa', 'conflictos laborales', 'defensa', 'actuación implacable', 'nivel técnico', 'actividad', 'principales características', 'país vasco', 'mejores resultados', 'sortu', 'sistema ermts', 'importante decirlo', 'escasos días', 'negociación comunitaria', 'solución extensible', 'lealtad', 'políticas sociales', 'agrario', 'política agraria comunitaria', 'eta', 'razonable', 'objetivo final', 'rodríguez zapatero', 'lucha', 'conferencias sectoriales', 'sistema sanitario público', 'máximo respeto', 'sistema sanitario sostenible', 'ermts vale', 'concesión política', 'comité interterritorial', 'estabilidad presupuestaria', 'contratos indefinidos', 'régimen especial', 'organizaciones empresariales', 'general', 'medida', 'presupuesto autonómico', 'espíritu claro', 'únicas retribuciones', 'construcción naval', 'instancia objetiva', 'partes implicadas', 'presentaremos pronto', 'elementos fácticos probatorios', 'situación', 'implacable', 'ámbito social caminasen', 'servicios', 'política antiterrorista', 'aeropuertos', 'sentido perjudicados', 'barajas', 'medidas tendentes', 'problema policial', 'organización terrorista', 'ilegalización', 'reformas estructurales', 'adjetivo descalificativo', 'sotiello campomanes', 'marco estable', 'posición', 'red semafórica', 'trevín lombán', 'amplio plan', 'irreversible deja', 'distintas reuniones', 'altos cargos', 'concepto distinto', 'larga duración', 'socialistas', 'general esperanzadas', 'ámbito nacional', 'legislación existente', 'servicios técnicos', 'concreto', 'corto plazo', 'agentes sociales', 'medida rigurosa', 'déficit público abultado', 'querido decirlo', 'reforma', 'medida necesaria', 'presupuesto agrario suficiente', 'vida', 'madrid barajas', 'presuntos objetivos políticos', 'función pública', 'robla pola', 'ermts', 'presunta deja', 'partidos políticos', 'marco', 'acuerdos', 'demasiadas fechas', 'temarios anteriores', 'semáforos', 'inmensa mayoría', 'jóvenes españoles', 'comisario ciolos', 'cumplimiento estricto', 'programas nacionales', 'porcentaje inadmisible', 'sistema actual', 'lealtad institucional', 'concreto francia', 'países', 'principios éticos', 'crédito extraordinario', 'sistema educativo español', 'ayudas directas adaptándolas', 'recursos públicos', 'servicio', 'principio inamovible', 'sistema financiero', 'sólida base', 'modelo farmacéutico', 'propuestas legislativas adoptadas', 'nivel político', 'punto concreto', 'suficiencia financiera', 'sistema sostenible', 'estructuras administrativas', 'falta viadangos telledo', 'articular fórmulas', 'tribunal constitucional', 'fuerza indudable', 'parlamento europeo', 'claro exponente', 'cadena', 'producto interior bruto desbordan', 'sentencia similar', 'vacío normativo presupuestario', 'plan', 'empleados públicos', 'efectos retroactivos', 'aranceles aduaneros', 'sanidad preparado', 'objetivo básico', 'terrorista', 'personas singulares', 'credibilidad perdida', 'entorno europeo', 'presupuestos públicos', 'aeropuertos similares', 'fuerzas políticas', 'pactos concretos', 'unión europea', 'administraciones concernidas', 'detenciones procedan', 'agentes económicos', 'comisión', 'irreversible', 'importes actuales', 'máxima calidad', 'políticas públicas', 'guardia alta', 'redistribución interna', 'procedimiento comunitario', 'reformas', 'elecciones autonómicas andaluzas', 'crisis absoluta', 'comisión interterritorial', 'compromiso sociosanitario', 'semáforo rojo', 'bildu', 'elementos probatorios suficientes', 'imposturas partidistas', 'medidas aprovecho', 'ingresos públicos', 'juntos', 'derecho', 'capacidad operativa', 'reforma laboral', 'cambio concesiones políticas', 'legislatura precedente', 'negociación colectiva', 'personas jurídicas', 'lucio', 'perfecto derecho', 'victoria política', 'presentaremos', 'máximas adhesiones', 'modelo', 'acción correspondiente', 'sostenible', 'sede parlamentaria expuse', 'interior unidad', 'fuerzas políticas democráticas', 'consejo general', 'contratos temporales', 'políticas socialistas', 'sanidad pública']], ['GMx', ['aeropuertos turísticos periféricos', 'monstruoso binomio barajas', 'tráfico aéreo', 'alfred bosch', 'modelo sostenido', 'bandera española', 'modelo intervencionista', 'pérdidas atribuibles', 'pérdidas', 'tintes cuasi soviéticos', 'llamada privatización', 'modelo', 'días josep piqué', 'favor escandaloso', 'bandera', 'barajas', 'obsesión dirigista']], ['GUPyD', ['comillas independientes', 'sistema electoral', 'derechos', 'policía', 'batasuna', 'sistema financiero', 'rosa díez', 'unión progreso', 'eta batasuna', 'baja implicación cívica', 'filosofía política', 'partidos políticos', 'interpelación', 'loreg establecimos', 'calidad democrática', 'representantes institucionales', 'magnífico artículo', 'organización terrorista eta', 'tribunal constitucional previó', 'representación ostentada', 'instituciones', 'medio ambiente', 'instituciones vascas', 'juan carlos izaguirre', 'ciudadanos vascos', 'recurso previo', 'estrategia común', 'derechos fundamentales', 'marca sucesora', 'constitucional', 'filtro', 'democracia', 'legales', 'guardias civiles', 'relación personal', 'instrumentos', 'maría beitialarrangoitia', 'enorme desafección', 'marcas', 'país vasco', 'instituciones políticos', 'problema español', 'medidas recomendadas', 'opción política legítima', 'conocido dirigente histórico', 'personas', 'iñaki errazkin', 'política', 'discurso político', 'intervención inicial', 'ley', 'tribunal supremo', 'tribunal constitucional', 'moción consecuencia', 'marcas blancas', 'instituciones democráticas', 'instrumentos legales', 'crisis institucional', 'ordenamiento jurídico', 'conocidas personas', 'eta', 'prudencia', 'juan carlos alduntzin', 'inmensa mayoría', 'boletín oficial', 'doctrina', 'ideas políticas', 'relación', 'encuentro pruebas', 'ciudadanos españoles', 'suficientes indicios', 'iniciativas valientes', 'euskal herritarrok', 'sistema democrático', 'presos políticos', 'crisis política', 'innumerables ejemplos', 'país', 'ley evidente', 'proyecto político', 'josetxo ibazeta', 'tribunal', 'interpelación urgente', 'pruebas indiciarias', 'estructura política', 'fernando savater', 'políticos', 'pacto nacional', 'relación política', 'reclamación justa', 'medidas concretas', 'policía nacional', 'organización', 'sociedad', 'discurso', 'tribunales europeos', 'guardia civil', 'doctrina constitucional', 'ejemplos', 'organización totalitaria', 'tribunales', 'organización terrorista', 'transparencia internacional', 'ideas', 'sencillos ciudadanos', 'desconfianza institucional', 'democracia interna', 'calidad', 'partidos', 'estrategia', 'pleno municipal', 'san sebastián', 'problema', 'actuaciones posteriores', 'comillas', 'llama prudencia', 'recurso', 'sociedad plural', 'derechos humanos', 'imposible combatirla', 'ciudadanos', 'filtro europeo', 'pruebas']], ['GC-CiU', ['servicios', 'gravísimos problemas', 'compromiso político', 'comunidades autónomas', 'agentes sociales', 'informe abril martorell', 'compromiso absoluto', 'empresa renfe', 'servicio', 'medianas empresas', 'simple razón', 'impuntualidad absoluta', 'sistema nacional', 'informe', 'sistema sanitario', 'graves dificultades', 'empresas', 'sanidad comporta', 'casos', 'convergència i', 'conscientes', 'campaña electoral puse', 'pacto', 'auténtico pacto', 'hacienda', 'cito hacienda', 'servicios sociales', 'esfuerzo importantísimo', 'mejora extraordinaria', 'gestión ermts', 'punto fundamental', 'mal servicio continuas averías', 'seamos conscientes', 'fundamental', 'comporta', 'casos pequeñas', 'sanidad', 'perdiz continuaremos poniéndonos', 'medidas diversas', 'servicio básico']]];
      // transform the data into a useful representation
      // 1 is inner, 2, is outer
      // need: inner, outer, links
      //
      // inner:
      // links: { inner: outer: }
      var outer = d3.map();
      var inner = [];
      var links = [];
      var outerId = [0];
      data.forEach(function(d){
      if (d == null)
      return;
      i = { id: 'i' + inner.length, name: d[0], related_links: [] };
      i.related_nodes = [i.id];
      inner.push(i);
      if (!Array.isArray(d[1]))
      d[1] = [d[1]];
      d[1].forEach(function(d1){
      o = outer.get(d1);
      if (o == null)
      {
      o = { name: d1,   id: 'o' + outerId[0], related_links: [] };
      o.related_nodes = [o.id];
      outerId[0] = outerId[0] + 1;
      outer.set(d1, o);
      }
      // create the links
      l = { id: 'l-' + i.id + '-' + o.id, inner: i, outer: o }
      links.push(l);
      // and the relationships
      i.related_nodes.push(o.id);
      i.related_links.push(l.id);
      o.related_nodes.push(i.id);
      o.related_links.push(l.id);
      });
      });
      data = {
      inner: inner,
      outer: outer.values(),
      links: links
      }
      // sort the data -- TODO: have multiple sort options
      outer = data.outer;
      data.outer = Array(outer.length);
      var i1 = 0;
      var i2 = outer.length - 1;
      for (var i = 0; i < data.outer.length; ++i)
      {
      if (i % 2 == 1)
      data.outer[i2--] = outer[i];
      else
      data.outer[i1++] = outer[i];
      }
      console.log(data.outer.reduce(function(a,b) { return a + b.related_links.length; }, 0) / data.outer.length);
      // from d3 colorbrewer:
      // This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).
      var colors = ["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]
      var color = d3.scale.linear()
      .domain([60, 220])
      .range([colors.length-1, 0])
      .clamp(true);
      var diameter = 960;
      var rect_width = 40;
      var rect_height = 14;
      var link_width = "1px";
      var il = data.inner.length;
      var ol = data.outer.length;
      var inner_y = d3.scale.linear()
      .domain([0, il])
      .range([-(il * rect_height)/2, (il * rect_height)/2]);
      mid = (data.outer.length/2.0)
      var outer_x = d3.scale.linear()
      .domain([0, mid, mid, data.outer.length])
      .range([15, 170, 190 ,355]);
      var outer_y = d3.scale.linear()
      .domain([0, data.outer.length])
      .range([0, diameter / 2 - 120]);
      // setup positioning
      data.outer = data.outer.map(function(d, i) {
      d.x = outer_x(i);
      d.y = diameter/3;
      return d;
      });
      data.inner = data.inner.map(function(d, i) {
      d.x = -(rect_width / 2);
      d.y = inner_y(i);
      return d;
      });
      function get_color(name)
      {
      var c = 0;
      if ('GIU'.localeCompare(name)==0) {
      c = 1;
      }
      else if ('GS'.localeCompare(name)==0) {
      c = 2;
      }
      else if ('GC-CiU'.localeCompare(name)==0) {
      c = 3;
      }
      else if ('GP'.localeCompare(name)==0) {
      c = 4;
      }
      else {
      c = 5;
      }
      return colors[c];
      }
      // Can't just use d3.svg.diagonal because one edge is in normal space, the
      // other edge is in radial space. Since we can't just ask d3 to do projection
      // of a single point, do it ourselves the same way d3 would do it.
      function projectX(x)
      {
      return ((x - 90) / 180 * Math.PI) - (Math.PI/2);
      }
      var diagonal = d3.svg.diagonal()
      .source(function(d) { return {"x": d.outer.y * Math.cos(projectX(d.outer.x)),
      "y": -d.outer.y * Math.sin(projectX(d.outer.x))}; })
      .target(function(d) { return {"x": d.inner.y + rect_height/2,
      "y": d.outer.x > 180 ? d.inner.x : d.inner.x + rect_width}; })
      .projection(function(d) { return [d.y, d.x]; });
      var svg = d3.select("body").append("svg")
      .attr("width", diameter)
      .attr("height", diameter)
      .append("g")
      .attr("transform", "translate(" + diameter / 2 + "," + diameter / 2 + ")");
      // links
      var link = svg.append('g').attr('class', 'links').selectAll(".link")
      .data(data.links)
      .enter().append('path')
      .attr('class', 'link')
      .attr('id', function(d) { return d.id })
      .attr("d", diagonal)
      .attr('stroke', function(d) { return get_color(d.inner.name); })
      .attr('stroke-width', link_width);
      // outer nodes
      var onode = svg.append('g').selectAll(".outer_node")
      .data(data.outer)
      .enter().append("g")
      .attr("class", "outer_node")
      .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })
      .on("mouseover", mouseover)
      .on("mouseout", mouseout);
      onode.append("circle")
      .attr('id', function(d) { return d.id })
      .attr("r", 4.5);
      onode.append("circle")
      .attr('r', 20)
      .attr('visibility', 'hidden');
      onode.append("text")
      .attr('id', function(d) { return d.id + '-txt'; })
      .attr("dy", ".31em")
      .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
      .attr("transform", function(d) { return d.x < 180 ? "translate(8)" : "rotate(180)translate(-8)"; })
      .text(function(d) { return d.name; });
      // inner nodes
      var inode = svg.append('g').selectAll(".inner_node")
      .data(data.inner)
      .enter().append("g")
      .attr("class", "inner_node")
      .attr("transform", function(d, i) { return "translate(" + d.x + "," + d.y + ")"})
      .on("mouseover", mouseover)
      .on("mouseout", mouseout);
      inode.append('rect')
      .attr('width', rect_width)
      .attr('height', rect_height)
      .attr('id', function(d) { return d.id; })
      .attr('fill', function(d) { return get_color(d.name); });
      inode.append("text")
      .attr('id', function(d) { return d.id + '-txt'; })
      .attr('text-anchor', 'middle')
      .attr("transform", "translate(" + rect_width/2 + ", " + rect_height * .75 + ")")
      .text(function(d) { return d.name; });
      // need to specify x/y/etc
      d3.select(self.frameElement).style("height", diameter - 150 + "px");
      function mouseover(d)
      {
      // bring to front
      d3.selectAll('.links .link').sort(function(a, b){ return d.related_links.indexOf(a.id); });
      for (var i = 0; i < d.related_nodes.length; i++)
      {
      d3.select('#' + d.related_nodes[i]).classed('highlight', true);
      d3.select('#' + d.related_nodes[i] + '-txt').attr("font-weight", 'bold');
      }
      for (var i = 0; i < d.related_links.length; i++)
      d3.select('#' + d.related_links[i]).attr('stroke-width', '5px');
      }
      function mouseout(d)
      {
      for (var i = 0; i < d.related_nodes.length; i++)
      {
      d3.select('#' + d.related_nodes[i]).classed('highlight', false);
      d3.select('#' + d.related_nodes[i] + '-txt').attr("font-weight", 'normal');
      }
      for (var i = 0; i < d.related_links.length; i++)
      d3.select('#' + d.related_links[i]).attr('stroke-width', link_width);
      }
